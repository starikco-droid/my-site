!function(_){woodmartThemeModule.$document.on("wdShopPageInit",function(){woodmartThemeModule.ajaxSearch()}),_.each(["frontend/element_ready/wd_search.default"],function(e,a){woodmartThemeModule.wdElementorAddAction(a,function(){woodmartThemeModule.ajaxSearch()})}),woodmartThemeModule.ajaxSearch=function(){void 0!==_.fn.devbridgeAutocomplete&&(_("form.woodmart-ajax-search").each(function(){var s=_(this),d=parseInt(s.data("count")),n=parseInt(s.data("thumbnail")),r=parseInt(s.data("symbols_count")),o=s.find('[name="product_cat"]'),e=s.parent(),l=s.data("post_type"),c=woodmart_settings.ajaxurl+"?action=woodmart_ajax_search",i=parseInt(s.data("price")),u=s.data("sku"),h=s.parents(".wd-search-full-screen").length,w=s.parents(".wd-search-full-screen-2").length,p=s.parents(".wd-search-dropdown").length,m=e.find(`.wd-search-results${h||w?"":" > "}.wd-scroll-content`),f=e.find(".wd-search-results"),g=s.data("include_cat_search");function v(e){0!==s.parents(".wd-search-form.wd-display-form.wd-with-overlay").length&&_(".wd-close-side").trigger("wdCloseSideAction",["open"===e?"show":"hide","click"])}0<d&&(c+="&number="+d),c+="&post_type="+l,o.length&&""!==o.val()&&(c+="&product_cat="+o.val()),g&&"yes"===g&&(c+="&include_cat_search="+g),s.find('[type="text"]').on("focus keyup cat_selected",function(e){var a=_(this),t={action:"woodmart_ajax_search",number:0<d?d:void 0,post_type:l};if(a.hasClass("wd-search-inited")||(a.devbridgeAutocomplete({serviceUrl:c,appendTo:m,minChars:r,deferRequestBy:woodmart_settings.ajax_search_delay,onHide:function(e,a){w&&f.removeClass("wd-no-results");var t=(w?s.parent():s).parent(),d="function"==typeof woodmartThemeModule.beforeSearchcontent&&t.find(".wd-search-history, .wd-search-requests, .wd-search-area").length;a||d||v("close"),a||w||h?t.removeClass("wd-searched"):d||(t.find(".wd-search-results").removeClass("wd-opened"),setTimeout(function(){t.removeClass("wd-searched")},400))},onSearchStart:function(){s.addClass("wd-search-loading")},beforeRender:function(e){p||v("open"),_(e).find(".wd-not-found-msg").parent().addClass("wd-not-found");var a=0<_(e).find(".wd-suggestion:not(.wd-not-found)").length;(a=_(e).find('[class*="wd-type-"]')?a:2<e[0].childElementCount)&&(a=s.serializeArray(),a=s.attr("action")+"?"+_.param(a),_(e).append('<a class="wd-all-results" href="'+a+'">'+woodmart_settings.all_results+"</a>")),_(e).removeAttr("style")},onSelect:function(e){0<e.permalink.length&&(window.location.href=e.permalink),s.parent().find(".wd-search-results").removeClass("wd-opened")},onSearchComplete:function(){s.removeClass("wd-search-loading"),woodmartThemeModule.$document.trigger("wood-images-loaded")},formatResult:function(e,a){var a="("+(a="&"===a?"&#038;":a).replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")",t="";return e.divider&&(t+=' <div class="suggestion-divider-title title">'+e.divider+"</div>"),n&&e.thumbnail&&(t+=' <div class="wd-suggestion-thumb">'+e.thumbnail+"</div>"),e.value&&(t=(t+=' <div class="wd-suggestion-content wd-set-mb reset-last-child">')+'<div class="wd-entities-title">'+e.value.replace(new RegExp(a,"gi"),"<strong>$1</strong>").replace(/&lt;(\/?strong)&gt;/g,"<$1>")+"</div>"),u&&e.sku&&(t+=' <p class="wd-suggestion-sku">'+e.sku+"</p>"),i&&e.price&&(t+=' <p class="price">'+e.price+"</p>"),e.value&&(t+=" </div>"),e.permalink&&(a="",e.value&&(a=`aria-label="${e.value.replace(/(<([^>]+)>)/gi,"")}"`),t+=` <a class="wd-fill" href="${e.permalink}" ${a}></a>`),e.products_not_found&&(t='<span class="wd-not-found-msg">'+e.value+"</span>"),w&&(e.no_results?f.addClass("wd-no-results"):f.removeClass("wd-no-results")),h||w||f.addClass("wd-opened"),(w?s.parent():s).parent().addClass("wd-searched"),t}}),a.addClass("wd-search-inited")),o.length&&"cat_selected"===e.type){""!==o.val()&&(t.product_cat=o.val());a=s.find('[type="text"]').devbridgeAutocomplete();let e=woodmart_settings.ajaxurl+"?"+new URLSearchParams(t).toString();g&&"yes"===g&&(e+="&include_cat_search="+g),a.setOptions({serviceUrl:e}),a.hide(),a.onValueChange()}}),woodmartThemeModule.$document.on("click",function(e){e=e.target;_(e).is(".wd-search-form")||_(e).parents().is(".wd-search-form")||_(e).is(".wd-search-full-screen")||_(e).parents().is(".wd-search-full-screen")||_(e).is(".wd-clear-search")||s.find('[type="text"]').devbridgeAutocomplete("hide")}),_(".wd-search-results > .wd-scroll-content").on("click",function(e){e.stopPropagation()})}),_(".wd-header-search.wd-display-dropdown > a").on("click",function(e){e.preventDefault()}))},_(document).ready(function(){woodmartThemeModule.ajaxSearch()}),window.addEventListener("wdUpdatedHeader",function(){woodmartThemeModule.ajaxSearch()})}(jQuery);