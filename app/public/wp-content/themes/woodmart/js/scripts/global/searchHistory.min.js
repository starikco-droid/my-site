woodmartThemeModule.$document.on("wdShopPageInit",function(){woodmartThemeModule.searchHistory()}),jQuery.each(["frontend/element_ready/wd_search.default"],function(e,t){woodmartThemeModule.wdElementorAddAction(t,function(){woodmartThemeModule.searchHistory()})}),woodmartThemeModule.searchHistory=function(){function n(e){e=e.target.querySelector('[type="text"]'),h(e.value)}function a(e){var t=this.textContent;h(t)}function o(e){var t=this.parentNode,r=t.parentNode.querySelector(".wd-search-history");r&&l(t,r)}function s(e){e.preventDefault(),localStorage.removeItem(r),this.closest(".wd-search-history").innerHTML=""}function i(e){e.preventDefault();var t=this.previousSibling.textContent.replaceAll("%20"," "),e=u().filter(function(e){return e!==t}),e=(localStorage.setItem(r,JSON.stringify(e)),this.closest("ul"));this.closest("li").remove(),0===e.childElementCount&&(e.closest(".wd-search-history").innerHTML="")}var e,r="woodmart_search_history",t=woodmart_settings.search_history_items_limit,l=(woodmart_settings.is_multisite&&(r+="_"+woodmart_settings.current_blog_id),function(n,o){var e,t,r=u().reverse();o.innerHTML="",0<r.length&&(e=d(),t=document.createElement("ul"),o.appendChild(e),o.appendChild(t),r.forEach(function(e){e=e.replaceAll("%20"," ");var t=n.hasAttribute("data-post_type")?n.getAttribute("data-post_type"):null,r=window.location.origin,r=(woodmart_settings.is_multisite&&0<woodmart_settings.home_url.length&&(r=woodmart_settings.home_url),new URL(r)),t=(r.searchParams.set("s",e),null!==(t=t||(n.querySelector('[name="post_type"]')?n.querySelector('[name="post_type"]').value:null))&&r.searchParams.set("post_type",t),c(e,r.href));o.querySelector("ul").appendChild(t)}))}),d=function(){var e=document.createElement("span"),t=document.createElement("span"),r=document.createElement("div");return e.textContent=woodmart_settings.search_history_title,e.classList.add("wd-search-title","title"),r.appendChild(e),t.classList.add("wd-sh-clear"),t.classList.add("wd-role-btn"),t.setAttribute("tabindex","0"),t.textContent=woodmart_settings.search_history_clear_all,t.addEventListener("click",s),r.appendChild(t),r.classList.add("wd-sh-head"),r},c=function(e,t){var r=document.createElement("span"),n=document.createElement("a"),o=document.createElement("li");return r.classList.add("wd-sh-clear"),r.classList.add("wd-role-btn"),r.setAttribute("tabindex","0"),r.addEventListener("click",i),n.textContent=e,n.setAttribute("href",t),n.classList.add("wd-sh-link"),n.addEventListener("click",a),o.appendChild(n),o.appendChild(r),o},u=function(){var e=(e=localStorage.getItem(r)?JSON.parse(localStorage.getItem(r)):[]).filter(function(e){return""!==e&&null!=e});return e=(e=0<t&&e.length>t?e.slice(-t):e).map(function(e){return e.replaceAll("%20"," ")})},h=function(t){var e=(e=u()).filter(function(e){return e.toLowerCase().trim()!==t.toLowerCase().trim()});t=t.replace("%20"," "),e.push(t.trim()),localStorage.setItem(r,JSON.stringify(e))};0!==(e=document.querySelectorAll("form.searchform")).length&&"undefined"!=typeof localStorage&&e.forEach(function(e){var t=e.querySelector('[type="text"]'),r=e.parentNode.querySelector(".wd-search-history");r&&(e.addEventListener("submit",n),t.addEventListener("wdOpenBeforeSearchContent",o),((t=e).closest(".wd-search-full-screen")||t.closest(".wd-search-full-screen-2"))&&l(e,r),r.addEventListener("mousedown",function(e){e.preventDefault()}))})},window.addEventListener("load",function(){woodmartThemeModule.searchHistory()});