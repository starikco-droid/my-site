!function(s){woodmartThemeModule.menuDropdownsAJAX=function(){function d(a){a.addClass("dropdowns-loading");var d=woodmart_settings.menu_storage_key+"_"+a.attr("id"),o=!1,e=a.find(".dropdown-load-ajax"),t=[];if(e.each(function(){var o=s(this).find(".dropdown-html-placeholder");0<o.length&&t.push(o.data("id"))}),woodmart_settings.ajax_dropdowns_save&&woodmartThemeModule.supports_html5_storage){e=localStorage.getItem(d);try{o=JSON.parse(e)}catch(o){console.log("cant parse Json",o)}}function n(o){Object.keys(o).forEach(function(d){woodmartThemeModule.removeDuplicatedStylesFromHTML(o[d],function(o){a.find('[data-id="'+d+'"]').replaceWith(o),a.addClass("dropdowns-loaded"),setTimeout(function(){a.removeClass("dropdowns-loading")},1e3)})}),setTimeout(function(){woodmartThemeModule.$document.trigger("wdLoadDropdownsSuccess")},500)}o?n(o):0===t.length?(a.addClass("dropdowns-loaded"),a.removeClass("dropdowns-loading")):s.ajax({url:woodmart_settings.ajaxurl,data:{action:"woodmart_load_html_dropdowns",ids:t},dataType:"json",method:"POST",success:function(o){if("success"===o.status){if(n(o.data),woodmart_settings.ajax_dropdowns_save&&woodmartThemeModule.supports_html5_storage)try{localStorage.setItem(d,JSON.stringify(o.data))}catch(o){}}else console.log("loading html dropdowns returns wrong data - ",o.message)},error:function(){console.log("loading html dropdowns ajax error")}})}window.addEventListener("wdEventStarted",function(){s(".menu").has(".dropdown-load-ajax").each(function(){var o=s(this);o.hasClass("dropdowns-loading")||o.hasClass("dropdowns-loaded")||(woodmartThemeModule.windowWidth<=1024?setTimeout(function(){d(o)},500):d(o))})})},s(document).ready(function(){woodmartThemeModule.menuDropdownsAJAX()})}(jQuery);