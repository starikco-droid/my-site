!function(f){woodmartThemeModule.$document.on("wdQuickShopSuccess wdQuickViewOpen wdUpdateWishlist",function(){woodmartThemeModule.swatchesVariations()}),f.each(["frontend/element_ready/wd_single_product_add_to_cart.default"],function(a,t){woodmartThemeModule.wdElementorAddAction(t,function(a){a.find(".variations_form").each(function(){f(this).wc_variation_form()}),woodmartThemeModule.swatchesVariations()})}),woodmartThemeModule.swatchesVariations=function(){function r(a,t){return"old"===woodmart_settings.variation_gallery_storage_method?e(a):i(a,t)}function d(a,t){void 0===t&&(t=!1);var e=a.data("product_variations"),i=(e=(e=t?t:e)||a.data("wd_product_variations"),[]);return e&&("object"!=typeof e||Array.isArray(e)?(e="string"==typeof e?JSON.parse(e):e).forEach(function(a){i[a.variation_id]=a.additional_variation_images,i.default=a.additional_variation_images_default}):(i[e.variation_id]=e.additional_variation_images,i.default=e.additional_variation_images_default,a.data("wd_product_variations",JSON.stringify([{additional_variation_images_default:e.additional_variation_images_default}])))),i}var a=f(".variations_form"),s=!1,c=!1===a.data("product_variations"),l=[],o=(f(".variations_form .label").on("click",function(a){f(this).siblings(".value").hasClass("with-swatches")&&a.preventDefault()}),a.each(function(){var a,n=f(this);n.data("swatches")||n.hasClass("wd-quick-shop-2")||(n.data("swatches",!0),n.data("product_variations")||n.find(".wd-swatches-product").find("> .wd-swatch").addClass("wd-enabled"),f(".wd-swatches-product > div").hasClass("wd-active")&&(n.addClass("variation-swatch-selected"),v(n)),(a=n.find("select.wd-changes-variation-image")).on("change",function(){var e,i,a,o,t=f(this),r=t.attr("name"),d=t.val(),t=n.data("product_variations"),s=!1;n.find("select").each(function(){if(!f(this).val())return!(s=!0)}),s&&d&&t&&(e=n.parents(".product, .wd-page-content"),i=e.find(".wd-gallery-thumb .wd-carousel-item img").first(),a=e.find(".wd-gallery-images .wd-carousel-item img").first(),o=e.find(".woocommerce-product-gallery .woocommerce-product-gallery__image > a .wp-post-image").first(),void 0===l.src&&(l.src=a.attr("src"),l.srcset=a.attr("srcset"),l.size=a.attr("srcset")),f.each(t,function(a,t){if(t.attributes[r]===d)return setTimeout(function(){n.wc_variations_image_update(t),_(t.variation_id,n)||i.attr("src")===t.image.thumb_src&&i.attr("srcset")===t.image.thumb_src||((i=e.find(".wd-gallery-thumb .wd-carousel-item img").first()).wc_set_variation_attr("src",t.image.src),i.wc_set_variation_attr("srcset",t.image.src),o.attr("data-o_src",t.image.src),o.attr("data-o_srcset",t.image.src),i.siblings("source").length&&i.siblings("source").attr("srcset",t.image.src),woodmartThemeModule.$document.trigger("wdResetVariation"))}),!1}))}),a.val()&&a.trigger("change"),n.on("click keydown",".wd-swatches-single > .wd-swatch",function(a){var t,e=f(this);"keydown"===a.type?"Enter"!==a.key&&" "!==a.key||(a.preventDefault(),f(this).trigger("click")):(a=e.data("value"),t=e.parent().data("id"),o(n),e.parents(".wd-swatches-limited").length&&e.parents(".wd-swatches-limited").find(".wd-swatch-divider").trigger("click"),e.hasClass("wd-active")||e.hasClass("wd-disabled")||(n.find("select#"+CSS.escape(t)).val(a).trigger("change"),e.parent().find(".wd-active").removeClass("wd-active"),e.addClass("wd-active"),o(n),g()))}).on("woocommerce_update_variation_values",function(){g(),o(n)}).on("click",".reset_variations",function(){n.find(".wd-active").removeClass("wd-active"),("yes"===woodmart_settings.swatches_labels_name&&769<=woodmartThemeModule.$window.width()||woodmartThemeModule.$window.width()<=768)&&n.find(".wd-attr-selected").html("")}).on("reset_data",function(){var t=f(this),e=!0,i=!0,a=(n.find(".variations select").each(function(){var a=f(this);0===(t.val()||"").length&&(e=!1),a.has("wd-changes-variation-image")&&a.val()&&(i=!1)}),e&&t.parent().find(".wd-active").removeClass("wd-active"),n.removeClass("variation-swatch-selected"),n.find(".woocommerce-variation").removeClass("wd-show"),document.querySelector(".woocommerce-product-gallery__wrapper.wd-carousel"));o(n),i&&_("default",n),a&&void 0!==a.swiper&&("yes"===woodmart_settings.product_slider_auto_height&&a.swiper.update(),a.swiper.slideTo(0)),woodmartThemeModule.$document.trigger("wdResetVariation")}).on("found_variation",function(a,t){var e,i,o,r,d;c&&_(t.variation_id,n,t),void 0!==t&&t.image.src&&(i=0<(e=n.parents(".product, .wd-page-content")).find('.wd-gallery-thumb .wd-carousel-item img[data-o_src="'+t.image.thumb_src+'"]').length,r=(o=e.find(".wd-gallery-thumb .wd-carousel-item img, .quick-view-gallery.wd-carousel .wd-carousel-item img").first()).siblings("source"),d=e.find(".woocommerce-product-gallery .woocommerce-product-gallery__image > a").first().data("o_href"),i&&o.wc_reset_variation_attr("src"),m(n)||_(t.variation_id,n)||(o.attr("src")!==t.image.thumb_src&&(o.wc_set_variation_attr("src",t.image.src),t.image.srcset.length&&o.wc_set_variation_attr("srcset",t.image.srcset),r.length)&&(t.image.srcset.length?r.wc_set_variation_attr("srcset",t.image.srcset):r.wc_set_variation_attr("srcset",t.image.src)),woodmartThemeModule.$document.trigger("wdShowVariationNotQuickView")),v(n),m(n)||w()||d===t.image.full_src||u(),i=document.querySelector(".woocommerce-product-gallery__wrapper"))&&(i.classList.contains("wd-carousel")&&void 0!==i.swiper&&(i.swiper.update(),i.swiper.slideTo(0)),void 0!==l.src)&&(o=e.find(".woocommerce-product-gallery .woocommerce-product-gallery__image > a .wp-post-image").first(),(d=r=l.src)!==o.attr("data-o_src"))&&(void 0!==l.srcset&&(d=l.srcset),void 0!==l.size&&o.attr("data-o_size",l.size),o.attr("data-o_src",r),o.attr("data-o_srcset",d))}).on("reset_image",function(){var a,t=f(".wd-gallery-thumb .wd-carousel-item img").first();w()||m(n)||(t.wc_reset_variation_attr("src"),t.wc_reset_variation_attr("srcset"),(a=t.siblings("source")).length&&a.wc_reset_variation_attr("srcset"),!t.attr("data-o_srcset")&&t.attr("data-srcset")&&t.attr("data-srcset",null))}).on("show_variation",function(a,t){n.find(".wd-swatch").length&&!n.find(".wd-swatch.wd-active").length&&n.find("select").each(function(){var a=f(this),t=a.val();t&&a.siblings(".wd-swatches-product").find('.wd-swatch[data-value="'+t+'"]').addClass("wd-active")}),g(),n.addClass("variation-swatch-selected")}))}),function(a){a.data("product_variations")&&a.find(".variations select").each(function(){var a=f(this),t=a.parent().find(".wd-swatches-product"),a=a.html(),a=f(a);t.find(".wd-swatch").removeClass("wd-enabled").addClass("wd-disabled"),a.each(function(){var a=f(this).val();f(this).hasClass("enabled")?t.find('div[data-value="'+a+'"]').removeClass("wd-disabled").addClass("wd-enabled"):t.find('div[data-value="'+a+'"]').addClass("wd-disabled").removeClass("wd-enabled")})})}),w=function(){return f(".single-product-content").hasClass("product-quick-view")},m=function(a){return a.parent().hasClass("quick-shop-form")},e=function(a){var t;if("undefined"!=typeof woodmart_variation_gallery_data||"undefined"!=typeof woodmart_qv_variation_gallery_data)return void 0!==(t=w()?woodmart_qv_variation_gallery_data:woodmart_variation_gallery_data)&&t&&t[a]},i=function(a,t){t=d(t);return void 0!==t&&t&&t[a]&&1<t[a].length||"default"===a},u=function(){var a;0!==f(".woocommerce-product-gallery__wrapper").length&&("yes"===woodmart_settings.swatches_scroll_top_desktop&&1024<=woodmartThemeModule.$window.width()||"yes"===woodmart_settings.swatches_scroll_top_mobile&&woodmartThemeModule.$window.width()<=1024)&&((a=f("html, body")).stop(!0),a.animate({scrollTop:f(".woocommerce-product-gallery__wrapper").offset().top-150},800),void 0!==f.fn.tooltip)&&f(".wd-swatch").tooltip("hide")},_=function(a,t,e){if(void 0===e&&(e=!1),"old"===woodmart_settings.variation_gallery_storage_method){if(!r(a,t)||m(t)||"default"===a&&!s)return!1;n(a,t)}else{if(!r(a,t)&&!e||e&&(i=a,!(void 0!==(o=e)&&o&&o.additional_variation_images&&1<o.additional_variation_images.length||"default"===i))||m(t)||"default"===a&&!s)return!1;o=d(t,e);h(o[a],t,a)}var i,o;return f(".woocommerce-product-gallery__image").trigger("zoom.destroy"),woodmartThemeModule.$document.trigger("wdReplaceMainGallery"),w()||woodmartThemeModule.$document.trigger("wdReplaceMainGalleryNotQuickView"),s="default"!==a,woodmartThemeModule.$window.trigger("resize"),!0},n=function(a,t){var e=(w()?woodmart_qv_variation_gallery_data:woodmart_variation_gallery_data)[a],t=t.parents(".product, .wd-page-content"),i=t.find(".woocommerce-product-gallery__wrapper");i.hasClass("wd-carousel")&&(i=i.find(".wd-carousel-wrap")),e&&1<e.length?t.find(".woocommerce-product-gallery").addClass("wd-has-thumb"):t.find(".woocommerce-product-gallery").removeClass("wd-has-thumb"),i.empty();for(var o=0;o<e.length;o++){var r="",r=(w()||"default"!==a||void 0===e[o].video||void 0===e[o].video.classes||(r+=e[o].video.classes),'<div class="wd-carousel-item'+r+'">');r+='<figure data-thumb="'+e[o].data_thumb+'" class="woocommerce-product-gallery__image">',w()||"default"!==a||void 0===e[o].video||void 0===e[o].video.controls||(r+=e[o].video.controls),w()||(r+='<a href="'+e[o].href+'">'),r+=e[o].image,w()||(r+="</a>"),w()||"default"!==a||void 0===e[o].video||void 0===e[o].video.content||(r+=e[o].video.content),r+="</figure></div>",i.append(r)}},h=function(a,t,e=""){var i,o,r,t=t.parents(".product, .wd-page-content"),d=t.find(".woocommerce-product-gallery__wrapper");for(i in(d=d.hasClass("wd-carousel")?d.find(".wd-carousel-wrap"):d).empty(),a&&1<a.length?t.find(".woocommerce-product-gallery").addClass("wd-has-thumb"):t.find(".woocommerce-product-gallery").removeClass("wd-has-thumb"),a)a.hasOwnProperty(i)&&(o="",w()||"default"!==e||void 0===a[i].video||void 0===a[i].video.classes||(o+=a[i].video.classes),o='<div class="wd-carousel-item'+o+'">',w()||"default"!==e||void 0===a[i].video||void 0===a[i].video.controls||(o+=a[i].video.controls),o+='<figure class="woocommerce-product-gallery__image" data-thumb="'+a[i].thumbnail_src+'">',w()||(o+='<a href="'+a[i].full_src+'" data-elementor-open-lightbox="no">'),r=a[i].srcset?'srcset="'+a[i].srcset+'"':"",o+='<img width="'+a[i].width+'" height="'+a[i].height+'" src="'+a[i].src+'" class="'+a[i].class+'" alt="'+a[i].alt+'" title="'+a[i].title+'" data-caption="'+a[i].data_caption+'" data-src="'+a[i].data_src+'"  data-large_image="'+a[i].data_large_image+'" data-large_image_width="'+a[i].data_large_image_width+'" data-large_image_height="'+a[i].data_large_image_height+'" '+r+' sizes="'+a[i].sizes+'" />',w()||(o+="</a>"),w()||"default"!==e||void 0===a[i].video||void 0===a[i].video.content||(o+=a[i].video.content),o+="</figure></div>",d.append(o))};function v(a){var a=a.find(".woocommerce-variation"),t=!1;a.length&&(a.find("> *").each(function(){f(this).is(":empty")||(t=!0)}),t)&&a.addClass("wd-show")}function g(){var t=!1;f(".variations_form").each(function(){var a=f(this);("yes"===woodmart_settings.swatches_labels_name&&769<=woodmartThemeModule.$window.width()||woodmartThemeModule.$window.width()<=768)&&!t&&(a.find(".wd-active").each(function(){var a=f(this),t=a.find(".wd-swatch-text").text(),e=a.parents("tr").find(".wd-attr-selected");e.length?e.html(t):a.parents("tr").find(" > th").append('<span class="wd-attr-selected">'+t+"</span>")}),t=!0)})}},f(document).ready(function(){woodmartThemeModule.swatchesVariations()})}(jQuery);