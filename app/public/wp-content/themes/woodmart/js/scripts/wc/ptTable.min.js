woodmartThemeModule.ptTable=function(){var e,t,r,d,a=document.querySelector(".wd-pt-table");a&&(e=a.querySelectorAll(".wd-pt-remove"),t=a.querySelectorAll(".wd-desired-price-opener"),r=a.querySelectorAll(".wd-desired-price-cancel"),d=a.querySelectorAll(".wd-desired-price-save"),e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=this;a.parentNode.querySelector(".wd-loader-overlay").classList.add("wd-loading"),jQuery.ajax({url:woodmart_settings.ajaxurl,data:{action:"woodmart_remove_from_price_tracker_in_my_account",security:woodmart_settings.pt_remove_button_nonce,product_id:t.dataset.productId,variation_id:t.dataset.variationId},method:"POST",success:function(e){e&&(e.success&&t.closest("tr").remove(),e.data.content)&&((tempDiv=document.createElement("div")).innerHTML=e.data.content,e=tempDiv.querySelector(".wd-pt-content").childNodes,a.parentNode.replaceChildren(...e))},error:function(){console.error("ajax remove from waitlist error")},complete:function(){a.parentNode.querySelector(".wd-loader-overlay").classList.remove("wd-loading")}})})}),t.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var e=this.closest("td").querySelector(".wd-desired-price-edit"),t=this.closest("td").querySelector(".amount"),r=this.closest("td").querySelector(".wd-cell-empty");e&&(e.classList.toggle("wd-hide"),this.classList.toggle("wd-hide")),t&&t.classList.add("wd-hide"),r&&r.classList.add("wd-hide")})}),r.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var e=this.closest(".wd-desired-price-edit"),t=e.closest("td").querySelector(".amount"),r=e.closest("td").querySelector(".wd-cell-empty");e&&(e.classList.add("wd-hide"),e.parentNode.querySelector(".wd-desired-price-opener").classList.remove("wd-hide")),t&&t.classList.remove("wd-hide"),r&&r.classList.remove("wd-hide")})}),d.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var o=this.closest(".wd-desired-price-edit"),e=o.querySelector('[name="wd-desired-price-change"]'),c=document.querySelector(".woocommerce-notices-wrapper");e&&(e=e.value,a.parentNode.querySelector(".wd-loader-overlay").classList.add("wd-loading"),jQuery.ajax({url:woodmart_settings.ajaxurl,data:{action:"woodmart_update_price_tracker_desired_price",security:woodmart_settings.pt_update_desired_price_nonce,product_id:o.dataset.productId,variation_id:o.dataset.variationId,desired_price:e},method:"POST",success:function(e){var t,r,d;e&&(e.data.notice&&(t=c.querySelectorAll(".wd-notice"),d=document.createElement("div"),r=e.success?"success":"warning",t.forEach(e=>{e.remove()}),d.classList.add("wd-notice","wd-"+r),d.append(e.data.notice),c.append(d)),e.success)&&(t=o.parentNode.querySelector(".amount"),r=o.parentNode.querySelector(".wd-cell-empty"),t&&t.remove(),r&&r.remove(),e.data.desired_price_html&&((d=document.createElement("div")).innerHTML=e.data.desired_price_html,o.parentNode.prepend(d.firstElementChild)),o.classList.add("wd-hide"),o.parentNode.querySelector(".wd-desired-price-opener").classList.remove("wd-hide"))},error:function(){console.error("ajax update desired price error")},complete:function(){a.parentNode.querySelector(".wd-loader-overlay").classList.remove("wd-loading")}}))})}))},window.addEventListener("load",function(){woodmartThemeModule.ptTable()});