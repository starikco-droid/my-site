woodmartThemeModule.abandonedCart=function(){var t,e,r=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},o=function(){var e;return"no"===woodmart_settings.abandoned_cart_needs_privacy||(e=document.querySelector("#_wd_recover_guest_cart_consent"))&&e.checked};(t=document.querySelector("#billing_email"))&&((e=document.querySelector("#_wd_recover_guest_cart_consent"))&&e.addEventListener("change",function(e){e.stopPropagation(),e.currentTarget.checked&&t.value.length&&r(t.value)&&(e=new Event("change"),t.dispatchEvent(e))}),t.addEventListener("change",function(e){var t,n,a,e=e.target.value;o()&&r(e)&&(t=document.querySelector("#billing_first_name"),n=document.querySelector("#billing_last_name"),a=document.querySelector("#billing_phone"),jQuery.ajax({url:woodmart_settings.ajaxurl,data:{action:"woodmart_recover_guest_cart",security:woodmart_settings.abandoned_cart_security,email:e,phone:a?a.value:"",first_name:t?t.value:"",last_name:n?n.value:"",currency:woodmart_settings.abandoned_cart_currency,language:woodmart_settings.abandoned_cart_language},method:"POST",error:function(){console.log("Ajax error of capturing the abandoned basket of the guest")}}))}))},window.addEventListener("load",function(){woodmartThemeModule.abandonedCart()});