!function(k){k.each(["frontend/element_ready/wd_products.default","frontend/element_ready/wd_products_tabs.default"],function(a,t){woodmartThemeModule.wdElementorAddAction(t,function(){woodmartThemeModule.quickShopVariationForm()})}),woodmartThemeModule.quickShopVariationForm=function(){function y(t){!1===t.data("product_variations")&&(t.addClass("wd-loading"),k.ajax({url:woodmart_settings.ajaxurl,data:{action:"woodmart_load_available_variations",id:t.data("product_id")},method:"get",dataType:"json",success:function(a){0<a.length&&t.data("product_variations",a).trigger("reload_product_variations")},complete:function(){t.removeClass("wd-loading");var a=t.find("select.wd-changes-variation-image");a.length&&a.first().val().length&&a.first().trigger("change")},error:function(){console.log("ajax error")}}))}woodmartThemeModule.$document.on("mouseenter touchstart mousemove",".wd-product.product-type-variable",function(){var e,i,n,s=k(this),d=s.find(".variations_form"),r=s.find(".button.product_type_variable"),o=s.find(".price").first(),t=s.find(".product-image-link > img, .product-image-link > picture > img"),l=s.find(".product-image-link picture source"),a=t.attr("src"),c=t.attr("srcset")?t.attr("srcset"):null,u=t.attr("sizes")?t.attr("sizes"):null,m=r.text(),h=woodmart_settings.add_to_cart_text,v=o.html(),f=s.find(".wd-product-stock"),g=s.find(".wd-product-sku").find("span").not(".wd-label"),w=r.siblings(".quantity").find("input[name=quantity]"),_=w.attr("max"),p=w.attr("min");function b(a){a.data("product_variations")&&(r.find("span").text(m),r.data("purchasable",!1),s.removeClass("wd-variation-active"),a.find(".variations select").each(function(){var a=k(this),t=a.parent().find(".wd-swatches-product"),e=a.html(),e=k(e);a.val()&&(r.find("span").text(h),r.data("purchasable",!0),s.addClass("wd-variation-active")),t.find(".wd-swatch").removeClass("wd-enabled").addClass("wd-disabled"),e.each(function(){var a=k(this).val();k(this).hasClass("enabled")?t.find('div[data-value="'+a+'"]').removeClass("wd-disabled").addClass("wd-enabled"):t.find('div[data-value="'+a+'"]').addClass("wd-disabled").removeClass("wd-enabled")})}))}function C(a){a.image&&(a.image.thumb_src&&1<a.image.thumb_src.length&&(s.addClass("wd-loading-image"),t.attr("src",a.image.thumb_src),t.attr("srcset")&&!a.image.srcset&&t.attr("srcset",a.image.thumb_src),t.one("load",function(){s.removeClass("wd-loading-image")})),1<a.image.srcset.length&&(t.attr("srcset",a.image.srcset),0<l.length)&&l.attr("srcset",a.image.srcset),1<a.image.sizes.length)&&(t.attr("sizes",a.image.sizes),0<l.length)&&l.attr("image_sizes",a.image.sizes)}!d.length||d.hasClass("wd-variations-inited")||"undefined"!=typeof elementorFrontend&&elementorFrontend.isEditMode()||(f.length&&(e=f.text(),i=f.attr("class")),g.length&&(n=g.text()),d.wc_variation_form(),d.addClass("wd-variations-inited"),d.on("click",".wd-swatch",function(){var e,a=k(this),t=a.parents(".wd-product"),i=a.data("value"),n=(a.parent().data("id"),a.parent().siblings("select"));d.hasClass("wd-form-inited")||(d.addClass("wd-form-inited"),y(d)),b(d),a.parents(".variations_form.wd-clear-double").length&&a.hasClass("wd-active")?(n.val("").trigger("change"),a.removeClass("wd-active"),e=!1,t.find(".wd-swatch").each(function(a,t){if(k(t).hasClass("wd-active"))return e=!0}),e||t.trigger("wdImagesGalleryInLoopOn",t)):a.hasClass("wd-active")||a.hasClass("wd-disabled")||(n.val(i).trigger("change"),a.parent().find(".wd-active").removeClass("wd-active"),a.addClass("wd-active"),t.trigger("wdImagesGalleryInLoopOff",t),b(d))}),d.on("change","select",function(){if(d.parents(".wd-products.grid-masonry").length&&void 0!==k.fn.isotope&&setTimeout(function(){d.parents(".wd-products.grid-masonry").isotope("layout")},100),d.hasClass("wd-form-inited"))return!1;d.addClass("wd-form-inited"),y(d)}),d.on("found_variation",function(a,t){1<t.price_html.length&&o.html(t.price_html),C(t),f.length&&(t.availability_html?(f.removeClass("in-stock available-on-backorder out-of-stock"),0<t.availability_html.search("available-on-backorder")?f.addClass("available-on-backorder"):0<t.availability_html.search("out-of-stock")?f.addClass("out-of-stock"):f.addClass("in-stock"),f.text(t.availability_html.replace(/<\/?[^>]+(>|$)/g,""))):(f.attr("class",i),f.text(e))),g.length&&(t.sku?g.text(t.sku):g.text(n)),w.length&&(w.val(p),w.attr("max",t.max_qty).attr("min",t.min_qty))}),d.on("show_variation",function(a,t,e){d.find(".wd-swatch").length&&!d.find(".wd-swatch.wd-active").length&&d.find("select").each(function(){var a=k(this),t=a.val();t&&a.siblings(".wd-swatches-product").find('.wd-swatch[data-value="'+t+'"]').addClass("wd-active")}),d.addClass("variation-swatch-selected")}),d.on("woocommerce_update_variation_values",function(){b(d)}),d.on("hide_variation",function(){o.html(v),r.find("span").text(m),t.attr("src")!==a&&(t.attr("src",a),t.attr("srcset",c),t.attr("sizes",u),0<l.length)&&l.attr("srcset")!==c&&(l.attr("srcset",c),l.attr("image_sizes",u)),f.length&&(f.attr("class",i),f.text(e)),g.length&&g.text(n),w.length&&w.attr("max",_).attr("min",p)}),d.on("click",".reset_variations",function(){d.find(".wd-active").removeClass("wd-active"),d.removeClass("wd-form-inited"),s.trigger("wdImagesGalleryInLoopOn",s)}),d.on("reset_data",function(){var a=k(this),t=!0;d.find(".variations select").each(function(){0===(a.val()||"").length&&(t=!1)}),t&&d.find(".wd-active").removeClass("wd-active"),d.removeClass("variation-swatch-selected"),b(d)}),d.find("select.wd-changes-variation-image").on("change",function(){var a=k(this),e=a.attr("name"),i=a.val(),a=d.data("product_variations"),t=!1;d.find("select").each(function(){if(!k(this).val())return!(t=!0)}),t&&i&&a&&k.each(a,function(a,t){if(t.attributes[e]===i)return setTimeout(function(){C(t)}),!1})}),r.on("click",function(a){var t=d.find(".single_add_to_cart_button");k(this).data("purchasable")&&t.length&&(a.preventDefault(),"undefined"!=typeof wc_add_to_cart_variation_params&&t.hasClass("disabled")?t.hasClass("wc-variation-is-unavailable")?alert(wc_add_to_cart_variation_params.i18n_unavailable_text):t.hasClass("wc-variation-selection-needed")&&alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text):(w.length&&(a=w.val())&&d.find(".single_variation_wrap .variations_button input[name=quantity]").val(a),d.trigger("submit"),r.addClass("loading"),woodmartThemeModule.$body.one("added_to_cart not_added_to_cart",function(){r.removeClass("loading")}),woodmartThemeModule.$body.one("added_to_cart",function(){r.addClass("added")})))}))})},k(document).ready(function(){woodmartThemeModule.quickShopVariationForm()})}(jQuery);