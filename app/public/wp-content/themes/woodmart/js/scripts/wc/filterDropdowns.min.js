!function(i){woodmartThemeModule.$document.on("wdShopPageInit",function(){woodmartThemeModule.filterDropdowns()}),woodmartThemeModule.filterDropdowns=function(){function t(e){e=e.parent(".wd-widget-layered-nav-dropdown-form, .wd-product-category-filter-form");woodmartThemeModule.$body.hasClass("woodmart-ajax-shop-on")&&void 0!==i.fn.pjax&&i.pjax({container:".wd-page-content",timeout:woodmart_settings.pjax_timeout,url:e.attr("action"),data:e.serialize(),scrollTo:!1,renderCallback:function(t,e,o){woodmartThemeModule.removeDuplicatedStylesFromHTML(e,function(e){t.html(e),o(),woodmartThemeModule.$document.trigger("wdShopPageInit"),woodmartThemeModule.$document.trigger("wood-images-loaded")})}})}function o(e){var e=e.params.args.data,e=i(this).find('option[value="'+e.id+'"]'),t=(e.attr("class")||"").match(/level-(\d+)/);if(t){var o=parseInt(t[1]);if(e.nextAll("option").each(function(){var e=(i(this).attr("class")||"").match(/level-(\d+)/);if(e){e=parseInt(e[1]);if(o<e)i(this).prop("selected",!1);else if(e<=o)return!1}}),0<o){for(var a=[],n=e.prevAll("option"),r=o-1;0<=r;){var l=!1;if(n.each(function(){var e=(i(this).attr("class")||"").match(/level-(\d+)/);if(e&&parseInt(e[1])===r)return a.unshift(i(this)),!(l=!0)}),!l)break;r--}var d=!1;0<a.length&&(d=a[a.length-1].prop("selected")),a.forEach(function(e){(!d||e===a[a.length-1])&&e.prop("selected",!1)})}}}i(".wd-widget-layered-nav-dropdown-form, .wd-product-category-filter-form").each(function(){var e=i(this).find("select"),t=e.data("slug");e.on("change",function(){var e=i(this).val();i("input[name=filter_"+t+"]").val(e)}),i().selectWoo&&(e.selectWoo({placeholder:e.data("placeholder"),minimumResultsForSearch:5,width:"100%",allowClear:!e.attr("multiple"),language:{noResults:function(){return e.data("noResults")}}}).on("select2:unselecting",function(){i(this).data("unselecting",!0)}).on("select2:opening",function(e){var t=i(this);t.data("unselecting")&&(t.removeData("unselecting"),e.preventDefault())}),e.on("select2:selecting",o))}),i(".wd-widget-layered-nav-dropdown__submit, .wd-product-category-filter-submit").on("click",function(){var e=i(this);e.siblings("select").attr("multiple")&&woodmartThemeModule.$body.hasClass("woodmart-ajax-shop-on")&&(t(e),e.prop("disabled",!0))}),i(".wd-widget-layered-nav-dropdown-form select, .wd-product-category-filter-form select").on("change",function(){var e=i(this);woodmartThemeModule.$body.hasClass("woodmart-ajax-shop-on")?e.attr("multiple")||t(e):e.parent().submit()})},i(document).ready(function(){woodmartThemeModule.filterDropdowns()})}(jQuery);